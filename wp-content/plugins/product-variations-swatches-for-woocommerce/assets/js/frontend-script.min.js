"use strict";var viwpvs_check_wrap1=!1,viwpvs_check_wrap2=!1;jQuery(document).ready(function(t){jQuery(document).on("click",".vi-wpvs-variation-style",function(t){jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),jQuery(document).on("click","body",function(t){jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden")}),jQuery(".vi_wpvs_variation_form").each(function(){viwpvs_check_wrap1=!0,jQuery(this).vi_woo_product_variation_swatches()});let i=jQuery(".variations_form:not(.vi_wpvs_variation_form)");i.length>0&&i.each(function(){viwpvs_check_wrap2=!0,jQuery(this).addClass("vi_wpvs_variation_form").vi_woo_product_variation_swatches()}),jQuery(document).ajaxComplete(function(t,i,e){let a=jQuery(".variations_form:not(.vi_wpvs_variation_form)");return a.length>0&&a.each(function(){jQuery(this).addClass("vi_wpvs_variation_form").vi_woo_product_variation_swatches()}),!1})}),jQuery(window).load(function(){if(!viwpvs_check_wrap1&&!viwpvs_check_wrap2){jQuery(".vi_wpvs_variation_form").each(function(){jQuery(this).vi_woo_product_variation_swatches()});let t=jQuery(".variations_form:not(.vi_wpvs_variation_form)");t.length>0&&t.each(function(){jQuery(this).addClass("vi_wpvs_variation_form").vi_woo_product_variation_swatches()})}});let vi_wpvs_frontend=function(t){this.form=t,this.variationData=t.data("product_variations"),this.init()};vi_wpvs_frontend.prototype.init=function(){let t=this,i=this.form,e=this.variationData;e&&t.check_available_variation(e,i);let a=0,s=0;i.find(".vi-wpvs-select-attribute select").each(function(){let t=jQuery(this).find('option[selected="selected"]'),e=jQuery(this).find('option.vi-wpvs-option-disabled[selected="selected"]');t.length>0&&s++,e.length>0&&(a++,jQuery(this).closest(".vi-wpvs-variation-wrap-wrap").find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&jQuery(this).closest(".vi-wpvs-variation-wrap-wrap").find(".vi-wpvs-variation-button-select >span ").html(jQuery(this).closest(".vi-wpvs-variation-wrap-wrap").find(".vi-wpvs-option-select:first-child").html()),i.hasClass("vi_wpvs_loop_variation_form")&&jQuery(this).val("").trigger("change"))}),s===a&&i.find(".reset_variations").length>0&&i.find(".reset_variations").addClass("vi-wpvs-hidden"),t.design_variation_item(),t.select_variation_item(),i.find(".vi-wpvs-variation-wrap-select-wrap").length&&i.find(".vi-wpvs-variation-wrap-select-wrap").each(function(t,i){let e,a;jQuery(i).parent().parent().parent().css({width:"100%"}),(e=jQuery(i).find(".vi-wpvs-variation-wrap-option")).attr("data-offset_height")||e.attr("data-offset_height",e.outerHeight()).removeClass("vi-wpvs-select-hidden").addClass("vi-wpvs-hidden"),(a=jQuery(i).find(".vi-wpvs-variation-button-select")).on("click",function(t){let i,a,s,o;t.preventDefault(),t.stopPropagation(),i=parseFloat(e.attr("data-offset_height")),a=jQuery(window).scrollTop(),s=jQuery(window).outerHeight(),o=jQuery(this).offset().top-a,e.addClass("vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-select-top vi-wpvs-variation-wrap-select-bottom"),jQuery(".vi-wpvs-variation-wrap-option:not(.vi-wpvs-variation-wrap-option-show)").addClass("vi-wpvs-hidden"),a>o||a<i||s>o+i+40?e.toggleClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show vi-wpvs-variation-wrap-select-bottom"):e.toggleClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show vi-wpvs-variation-wrap-select-top")})}),i.find(".vi-wpvs-option-wrap").each(function(e,a){let s,o,n,v;s=jQuery(a).closest(".vi-wpvs-variation-wrap-wrap"),(o=s.find("select.vi-wpvs-select-attribute")).find("option").removeClass("vi-wpvs-option-disabled"),jQuery(a).on("mouseenter",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}).on("mouseleave",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}).on("click",function(e){if(e.stopPropagation(),jQuery(this).hasClass("vi-wpvs-option-wrap-disable"))return e.preventDefault(),e.stopPropagation(),!1;jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(e.preventDefault(),e.stopPropagation()),jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),i.find(".reset_variations").removeClass("vi-wpvs-hidden"),s.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default"),s.find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&(s.find(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),s.find(".vi-wpvs-variation-button-select >span ").html(jQuery(this).find(".vi-wpvs-option-select").html())),jQuery(this).find(".vi-wpvs-option-radio").length>0&&(s.find(".vi-wpvs-option-radio").prop("checked",!1),jQuery(this).find(".vi-wpvs-option-radio").prop("checked",!0),jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),n=o.val().toString(),(v=jQuery(this).data("attribute_value").toString())!==n?(jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"),o.val(v).trigger("change"),t.select_variation_item()):jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(i.hasClass("vi_wpvs_loop_variation_form")?i.data("vpvs_double_click")?(o.val("").trigger("change"),t.select_variation_item()):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"):s.data("vpvs_double_click")?(o.val("").trigger("change"),t.select_variation_item()):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),e.stopPropagation()})}),i.find("select:not(.vi-wpvs-select-attribute):not(.vi-wpvs-variation-style-select)").change(function(){setTimeout(function(){t.select_variation_item()},500)}),i.find(".reset_variations").on("click",function(){jQuery(this).addClass("vi-wpvs-hidden"),i.find("select.vi-wpvs-select-attribute").val("").trigger("change"),t.select_variation_item(),i.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default"),i.find(".vi-wpvs-option-radio").prop("checked",!1)})},vi_wpvs_frontend.prototype.check_available_variation=function(t,i){let e,a=[],s=[],o={},n=0;if(i.find(".vi-wpvs-select-attribute select").each(function(){let t=jQuery(this).val().toString();t&&n++,o[jQuery(this).data("attribute_name")]=t}),n>0){if(1===(e=Object.getOwnPropertyNames(o)).length)return jQuery.each(t,function(t,i){let s=i.attributes[e[0]];s&&-1===a.indexOf(s)&&a.push(s)}),a.length>0&&(a.push(""),i.find(".vi-wpvs-select-attribute select option").each(function(t,i){let e=jQuery(i).val().toString();-1===jQuery.inArray(e,a)&&jQuery(i).addClass("vi-wpvs-option-disabled")})),!1;for(let n=0;n<e.length;n++){let v=e[n],r=o[v];if(!r||""===r)for(let t=0;t<e.length;t++){if(n==t)continue;let a=e[t];i.find('.vi-wpvs-select-attribute select[name="'+a+'"] option').removeClass("vi-wpvs-option-disabled")}jQuery.each(t,function(t,o){if(!o.attributes[v])return i.find('select[name ="'+v+'"]').addClass("vi-wpvs-select-option-show"),!0;if(-1===a.indexOf(o.attributes[v])&&a.push(o.attributes[v]),r==o.attributes[v]){i.find('option[value ="'+o.attributes[v]+'"]').removeClass("vi-wpvs-option-disabled"),-1===s.indexOf(o.attributes[v])&&s.push(o.attributes[v]);for(let t=0;t<e.length;t++){let n=e[t];o.attributes[n]&&n!==v&&(i.find('option[value ="'+o.attributes[n]+'"]').removeClass("vi-wpvs-option-disabled"),-1===s.indexOf(o.attributes[n])&&s.push(o.attributes[n]),-1===a.indexOf(o.attributes[n])&&a.push(o.attributes[n]))}}else for(let t=0;t<e.length;t++){let a=e[t];""===o.attributes[a]||null===o.attributes[a]?i.find('select[name ="'+a+'"]').addClass("vi-wpvs-select-option-show"):""!==r&&null!==r&&a!==v&&-1===s.indexOf(o.attributes[a])&&i.find('option[value ="'+o.attributes[a]+'"]').addClass("vi-wpvs-option-disabled")}})}}else jQuery.each(t,function(t,e){let s,o=e.attributes,n=Object.getOwnPropertyNames(e.attributes);for(s=0;s<n.length;s++){let t=n[s];if(""===o[t]||null===o[t])return i.find('select[name ="'+t+'"]').addClass("vi-wpvs-select-option-show"),!0;-1===a.indexOf(o[t])&&a.push(o[t])}});a.length>0&&(a.push(""),i.find(".vi-wpvs-select-attribute select:not(.vi-wpvs-select-option-show) option").each(function(t,i){let e=jQuery(i).val().toString();-1===jQuery.inArray(e,a)&&jQuery(i).addClass("vi-wpvs-option-disabled")})),i.find(".vi-wpvs-select-attribute select").removeClass("vi-wpvs-select-option-show")},vi_wpvs_frontend.prototype.design_variation_item=function(){let t=this.form;t.find(".vi-wpvs-variation-wrap-wrap").each(function(){let t=jQuery(this).parent().parent();jQuery(this).parent().addClass("vi-wpvs-variation-style-content"),t.find(".vi-wpvs-select-attribute  > select").addClass("vi-wpvs-select-attribute"),t.addClass(t.find(".vi-wpvs-variation-wrap").data("display_type"))}),t.find(".vi-wpvs-option.vi-wpvs-option-color").each(function(t,i){let e=jQuery(i).data("option_color");console.log(e),jQuery(i).css({background:e})}),t.find(".vi-wpvs-variation-wrap-wrap").removeClass("vi-wpvs-hidden"),t.find(".vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-top,.vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-bottom").each(function(){let t=jQuery(this).outerWidth();jQuery(this).css({"margin-left":"-"+t/2+"px"})}),t.find(".vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-left,.vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-right").each(function(){let t=jQuery(this).outerHeight();jQuery(this).css({"margin-top":"-"+t/2+"px"})})},vi_wpvs_frontend.prototype.select_variation_item=function(){let t=this.form,i=t.find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});t.find(".vi-wpvs-option-wrap").each(function(t,e){let a=jQuery(e).data("attribute_value").toString();-1!==jQuery.inArray(a,i)?jQuery(e).removeClass("vi-wpvs-option-wrap-disable"):jQuery(e).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-option-wrap-disable")})},jQuery.fn.vi_woo_product_variation_swatches=function(){return new vi_wpvs_frontend(this),this};